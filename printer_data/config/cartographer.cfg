[mcu cartographer]
serial: /dev/serial/by-id/usb-Cartographer_614e_2C0008000643303459323220-if00
restart_method: command

[stepper_z]
endstop_pin: probe:z_virtual_endstop
homing_retract_dist: 0

[gcode_macro BED_MESH_CALIBRATE]
rename_existing: _BED_MESH_CALIBRATE
gcode:
    {% set TARGET_TEMP = printer.heater_bed.target %}
    M140 S0
    _BED_MESH_CALIBRATE {rawparams}
    M140 S{TARGET_TEMP}

[quad_gantry_level]
#gantry_corners:
#   A newline separated list of X, Y coordinates describing the two
#   opposing corners of the gantry. The first entry corresponds to Z,
#   the second to Z2. This parameter must be provided.
#points:
#   A newline separated list of four X, Y points that should be probed
#   during a QUAD_GANTRY_LEVEL command. Order of the locations is
#   important, and should correspond to Z, Z1, Z2, and Z3 location in
#   order. This parameter must be provided. For maximum accuracy,
#   ensure your probe offsets are configured.
#speed: 50
#   The speed (in mm/s) of non-probing moves during the calibration.
#   The default is 50.
#horizontal_move_z: 5
#   The height (in mm) that the head should be commanded to move to
#   just prior to starting a probe operation. The default is 5.
#max_adjust: 4
#   Safety limit if an adjustment greater than this value is requested
#   quad_gantry_level will abort.
#retries: 0
#   Number of times to retry if the probed points aren't within
#   tolerance.
#retry_tolerance: 0
#   If retries are enabled then retry if largest and smallest probed
#   points differ more than retry_tolerance.

[gcode_macro QUAD_GANTRY_LEVEL] # safer and faster QGL for Cartographer
rename_existing: _QUAD_GANTRY_LEVEL
gcode:
    G28 # or use a conditional or safe homing
    _QUAD_GANTRY_LEVEL horizontal_move_z=10 retries=0 retry_tolerance=1.0
    _QUAD_GANTRY_LEVEL horizontal_move_z=1
    G28 Z
    
[cartographer]
mcu: cartographer
x_offset: 0 # This is the offset of your probe from the nozzle tip, to the centre of the coil.
y_offset: 20 # This is the offset of your probe from the nozzle tip, to the centre of the coil.
verbose: yes # For extra output

[safe_z_home]:
home_xy_position: 150, 150
speed: 100
z_hop: 10
    
[bed_mesh]
zero_reference_position: 150, 150 # The centre of your bed. 
speed: 300
horizontal_move_z: 3
mesh_min: 50, 50
mesh_max: 250, 250
probe_count: 30, 30
adaptive_margin: 10
mesh_pps: 0,0 # Disable interpolation - mesh is probably dense enough

[temperature_sensor cartographer]
sensor_type: temperature_mcu
sensor_mcu: cartographer
min_temp: 5
max_temp: 110

#[adxl345]
#cs_pin: cartographer:PA3
#spi_bus: spi1

[lis2dw]
cs_pin: cartographer:PA3
spi_bus: spi1

#[resonance_tester]
#accel_chip: adxl345
#probe_points:
#    <blank>, <blank>, 20 # Fill out the blank with x and y coordinates where you want to run the resonance test.